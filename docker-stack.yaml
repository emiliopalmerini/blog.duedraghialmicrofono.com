 services:
  web:
    image: klakegg/hugo:latest # Usa un'immagine Hugo preesistente
    command: hugo server --bind=0.0.0.0 --port=1313 --disableFastRender
    volumes:
      - .:/src
      - hugo_public:/src/public
    working_dir: /src
    labels:
      - "traefik.enable=true"
      - "traefik.http.services.web.loadbalancer.server.port=1313"
      - "traefik.http.routers.web.rule=Host(`duedraghialmicrofono.com`)"
      - "traefik.http.routers.web.entrypoints=websecure"
      - "traefik.http.routers.web.tls.certresolver=myresolver"
    networks:
      - poseidon_traefik_proxy
    deploy:
      replicas: 1

 volumes:
   hugo_public:
 
 networks:
  poseidon_traefik_proxy:
    external: true
